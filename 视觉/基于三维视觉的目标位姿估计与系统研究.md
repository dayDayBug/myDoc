## 基于三维视觉技术的桨叶位姿估计与喷涂系统研究

 

### 第1章 **绪论**

#### 1.1 课题来源与背景意义

##### 1.1.1 课题来源

##### 1.1.2 课题的背景与意义

 

#### 1.2 国内外研究现状

##### 1.2.1 基于视觉的自动喷涂研究现状

##### 1.2.2 三维成像技术研究现状

##### 1.2.3 点云配准技术国内外研究现状

点云指的是物体在某个坐标系下点的信息集合，包含了丰富的信息，可是三维坐标X，Y，Z、颜色、强度值、时间等等。由于点云包含了大量的信息，近年来在三维场景重建、自动驾驶、机器人学等领域得到了广泛应用。而点云配准技术是三维场景重建问题的关键技术。配准指的是两幅点云之间的变换估计问题，即找到可以从源点云映射到目标点云的旋转变换矩阵R和平移变换矩阵T。

点云的配准按照是否使用同一个类型的传感器，分为同源点云配准和跨源点云配准。同源点云配准指的是在同一类型的传感器下，对不同时间、不同视角下获取的点云进行配准。同源配准下存在的一些问题：噪声和离群点以及部分重叠问题。跨源配准，顾名思义，就是对不同类型传感器获得的点云进行配准，除了具有同源配准的问题以外，还有一些由于不同传感类型成像机制与分辨率的不同带来的密度差和尺度变化的问题。

####  1.3论文的研究内容与结构安排

第一章首先介绍了本课题的来源以及对此课题进行研究的背景与意义，接着针对本课题将会运用到的核心技术进行了国内外的文献阅读与综述，为下一章节的具体系统方案设计提供理论支撑。



 

### 第2章 系统方案设计

目标位姿估计：是指求解目标本体坐标系相对于参考坐标系之间平移和旋转变换关系的过程。



····喷涂机器人运动轨迹自动生成技术研究方案·····

​	捏合机是固体火箭推进剂与火炸药配方研究及生产的关键工艺设备，其近心桨和远心桨均做自转和公转运动，因此给机器人喷涂路径自动规划带来了极大的挑战。为此，针对捏合机自动喷涂问题，提出以三维扫描仪和喷涂机器人为硬件基础，集成基于模型配准、喷涂区域计算、喷涂路径和机器人运动轨迹生成算法的软件模块，实现捏合机桨叶在不同位姿下的自动喷涂方案，其整体流程如图1所示。

![img](file:///C:\Users\72696\AppData\Local\Temp\ksohtml\wpsF1FE.tmp.jpg) 

图1 整体方案流程

1）桨叶模型的自动匹配

​	喷涂机器人运动轨迹生成的第一步是要确定喷涂机器人和近心桨和远心桨的相对位置和姿态，由于近心桨和远心桨均做自转和公转运动，难以准确的确定近心桨和远心桨的位置和姿态，而三维扫描仪对桨叶的扫描模型存在的噪声和孔洞较多，无法直接采用此模型进行路径规划。本方案采用基于模型配准的桨叶位姿计算方法，实现对近心桨和远心桨和喷涂机器人的相对位置的确定，基本思路是分布建立近心桨和远心桨的理论几何模型，采用三维扫描仪对当前的桨叶进行扫描，然后采用ICP迭代算法将扫描后的桨叶点云模型和理论几何模型进行配准，求出三维变换矩阵，从而推算出喷涂机器人和桨叶的理论模型的位姿关系。

![img](file:///C:\Users\72696\AppData\Local\Temp\ksohtml\wpsF1FF.tmp.jpg) 

(a)理论模型     (b)扫描模型      (c)配准结果示意

 ![img](file:///C:\Users\72696\AppData\Local\Temp\ksohtml\wpsF200.tmp.jpg)

(a)理论模型      (b)扫描模型     (c)配准结果示意

图2 桨叶模型自动匹配

2）桨叶喷涂区域计算

​	确定喷涂机器人和理论桨叶模型的相对位姿关系后，采用视觉投影算法计算喷涂机器人对桨叶的喷涂区域。

![img](file:///C:\Users\72696\AppData\Local\Temp\ksohtml\wpsF201.tmp.jpg) 

图3 桨叶喷涂区域计算

3）喷涂轨迹生成

螺旋形和Z字形为常见喷涂路径，在针对桨叶的喷涂精度允许情况下，本方案采用Z字形路径生成策略，生成桨叶喷涂区域的Z字形路径。

![img](file:///C:\Users\72696\AppData\Local\Temp\ksohtml\wpsF212.tmp.jpg) 

图4 喷涂轨迹生成

4）喷涂机器人运动轨迹生成

![img](file:///C:\Users\72696\AppData\Local\Temp\ksohtml\wpsF213.tmp.jpg) 

桨叶喷涂区域的路径需要转化成喷涂机器人的最终运动轨迹，通过桨叶路径点的法向，同时考虑喷涂机器人和桨叶及设备的干涉，计算出喷涂机器人运动轨迹，输出机器人运动控制代码。



#####  位姿估计方法分类：

###### 1）基于特征对应的方法：

基于特征点的目标姿态估计：主要分为特征点提取和位姿解算两大部分

（1） 特征提取阶段：对于目标纹理特征明显的可以用SIFT, SURF, ORB完成特征的提取

​								   对于目标纹理特征稀疏的但可以被视为合作目标来处理时：人工在目标上布置空间位置已知的标志点，在图像上找到对应的标志点像素点，来建立点对应关系。

（2）位姿求解阶段：迭代的方法：建立最小化像方残差目标函数，用牛顿法或LM算法不断迭代优化求解位姿。

​								  非迭代的方法：P4P和P5P的直接线性变换DLT(Direct Linear Transform)，根据目标三维点和像素点的对应关系建立线性方程组，直接求解出矩阵参数



###### 2）基于模板匹配的方法

Markus Ulrich等人绘制出目标物体的CAD模型后，设置一系列虚拟观察点，以采样的方式获取目标不同位姿下的成像以建立模板库，然后将待测图像与模板对比，结合尺度空间思想和方位图相似性进行匹配。其位姿预测的精度受采样点个数影响。

桂阳将舰船的三维模型在不同位姿下进行二维投影，计算得到的二维图像投影中目标轮廓的MSA矩，离线生成模型库；接着根据MSA矩在模型库中找到与当图片中目标轮廓匹配度最高的投影轮廓，再进行轮廓采样点匹配得到初始相对位姿；最后在相对位姿的初值的基础上利用距离图迭代最小二乘法得到最终的相对位姿参数。

王毅凡利用OPENGL对建立起飞行目标三维模型追踪拍摄成像，生成模拟影响库，利用光流结合Gra Cut的图像分割方法分别将真实影像和模拟影响中的目标和背景分离，最后采用GPFI策略匹配模拟影像轮廓线与实际影像轮廓线特征，从而得到飞行目标的位置与姿态。

孙晓亮利用飞机目标的3D模型构建样本数据库，采用HOG特征及LDA算法进行线性分类得到初始位姿；在后续位姿跟踪中，基于目标区域分割的处理思路，通过最大化前景与背景之间的差异实现位姿参数的求解。

![image-20211018223325584](C:\Users\72696\AppData\Roaming\Typora\typora-user-images\image-20211018223325584.png)

###### 3）基于特征描述子的方法 

有PFH，FPFH

###### 4）基于机器学习的位姿估计





一个图像的特征点由两部分组成：关键点和描述子。关键点指的是该特征点在图像中的位置，有点还具有方向和尺度信息。描述子通常是一个向量，按照人为设计的描述方式，描述关键点周围的像素信息。通常描述子是按照**外观相似的特征应该具有相似的描述子**来设计的。在匹配的时候，只要两个特征点的描述子在向量空间中的距离很近，则认为是同一个特征点。

##### 点云关键点提取：

ISS3D：具有识别能力强，重复性高的特点，但是对噪声比较敏感。

NARF：对边缘关键点提取效果较好，对其他部位的关键点不敏感。

SIFT3D：

Harris3D：哈里斯角点检测算法一方面可以用在点云里面实现关键点的提取，另一方面也可以用在图像处理上提取角点。Harris3D对变化明显的区域效果更好。

##### 局部特征描述子：（阅读并理解原始论文）

点特征直方图（PFH）：时间消耗大，无法满足实时要求，特征维度是125

快速点特征直方图（FPFH）：是PFH的优化，特征维度是33

三维形状上下文（3DSC）：需要计算点云的曲面形状特征，增加了计算量，特征维度是1980

方向直方图签名描述子（SHOT）：特征维度是352，采用欧式距离计算，比较耗时。



#### 位姿估计综述：

相关的算法：ICP以及改进算法、RANSAC、VFH特征描述符、KNN、哈希查找技术和RANSAC抽样策略、SVM分类算法和PE算法级联、FPFH和VFH特征





配准：将未知的数据集映射到已经的数据集上以估计其姿态

SVD在标定中的具体作用
